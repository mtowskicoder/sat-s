<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SMS Onay Kataloƒüu</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #0f172a;
      color: #fff;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #38bdf8;
    }
    .hidden { display: none; }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
      margin-top: 25px;
    }
    .card {
      background: rgba(255,255,255,0.05);
      border-radius: 16px;
      padding: 18px;
      text-align: center;
      transition: 0.3s;
      backdrop-filter: blur(10px);
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 15px #38bdf8;
    }
    button {
      background: #38bdf8;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      color: white;
      font-weight: bold;
      transition: 0.3s;
    }
    button:hover { background: #0ea5e9; }
    input, select {
      width: 90%;
      padding: 8px;
      margin-top: 6px;
      border-radius: 8px;
      border: none;
      outline: none;
      background: #1e293b;
      color: white;
    }
    #adminPanel { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>üì± SMS Onay Kataloƒüu</h1>

  <div id="loginPanel">
    <h3>Admin Giri≈üi</h3>
    <input type="password" id="adminPass" placeholder="Admin ≈ûifresi">
    <button onclick="adminLogin()">Giri≈ü Yap</button>
  </div>

  <div id="adminPanel" class="hidden">
    <h2>üõ†Ô∏è Admin Paneli</h2>
    <select id="kategoriSelect"></select>
    <input id="urunAdi" placeholder="√úr√ºn adƒ±">
    <input id="stok" type="number" placeholder="Stok">
    <input id="fiyat" type="number" step="0.01" placeholder="Fiyat">
    <button onclick="urunEkle()">√úr√ºn Ekle</button>
    <button onclick="kategoriEkle()">Yeni Kategori Ekle</button>
    <input id="kategoriYeni" placeholder="Yeni kategori adƒ±">
  </div>

  <div id="kategoriMenu"></div>
  <div id="urunListesi" class="grid"></div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const ADMIN_PASSWORD = "A_9jD!xR2@fG$Qp8#Z"; // Zor admin ≈üifresi
    let kategoriler = ["TikTok", "Instagram", "WhatsApp", "Telegram", "Pes", "Diƒüer"];
    let urunler = [
      {id: 1, ad: "TikTok SMS Onay", kategori: "TikTok", stok: 20, fiyat: 1.5},
      {id: 2, ad: "Instagram SMS Onay", kategori: "Instagram", stok: 10, fiyat: 2.0}
    ];

    function adminLogin() {
      const pass = document.getElementById("adminPass").value;
      if (pass === ADMIN_PASSWORD) {
        document.getElementById("loginPanel").classList.add("hidden");
        document.getElementById("adminPanel").classList.remove("hidden");
        kategoriListele();
        render();
      } else {
        alert("Yanlƒ±≈ü ≈üifre!");
      }
    }

    function kategoriListele() {
      const sel = document.getElementById("kategoriSelect");
      sel.innerHTML = kategoriler.map(k => `<option>${k}</option>`).join('');
      const menu = document.getElementById("kategoriMenu");
      menu.innerHTML = kategoriler.map(k =>
        `<button onclick="kategoriGoster('${k}')">${k}</button>`
      ).join(' ');
    }

    function kategoriEkle() {
      const yeni = document.getElementById("kategoriYeni").value.trim();
      if (yeni && !kategoriler.includes(yeni)) {
        kategoriler.push(yeni);
        kategoriListele();
        document.getElementById("kategoriYeni").value = "";
      }
    }

    function urunEkle() {
      const ad = document.getElementById("urunAdi").value.trim();
      const stok = parseInt(document.getElementById("stok").value);
      const fiyat = parseFloat(document.getElementById("fiyat").value);
      const kategori = document.getElementById("kategoriSelect").value;
      if (!ad || !stok || !fiyat) return alert("L√ºtfen t√ºm bilgileri doldurun!");
      const id = urunler.length + 1;
      urunler.push({id, ad, kategori, stok, fiyat});
      render();
      alert("√úr√ºn eklendi!");
    }

    function kategoriGoster(k) {
      const filtreli = urunler.filter(u => u.kategori === k);
      render(filtreli);
    }

    function urunSat(id) {
      const urun = urunler.find(u => u.id === id);
      if (!urun) return;
      if (urun.stok <= 0) return alert("Stokta yok!");
      urun.stok--;
      if (urun.stok === 0) urunler = urunler.filter(u => u.id !== id);
      render();
      const data = { urun: urun.ad, fiyat: urun.fiyat, kategori: urun.kategori };
      tg.sendData(JSON.stringify(data));
      alert("Satƒ±n alma bilgisi Telegram‚Äôa g√∂nderildi.");
    }

    function render(liste = urunler) {
      const container = document.getElementById("urunListesi");
      container.innerHTML = liste.map(u => `
        <div class="card">
          <div class="service">${u.ad}</div>
          <div class="country">Kategori: ${u.kategori}</div>
          <div>Stok: ${u.stok}</div>
          <div class="price">${u.fiyat.toFixed(2)} ‚Ç∫</div>
          <button onclick="urunSat(${u.id})">Satƒ±n Al</button>
        </div>
      `).join('');
    }

    kategoriListele();
    render();
  </script>
</body>
</html>
