<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SMS Onay KataloÄŸu</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  body { font-family: 'Poppins', sans-serif; background: #0f172a; color: white; margin:0; padding:20px; }
  h1 { text-align: center; color: #38bdf8; }
  #announcement { background: #1e293b; padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align:center; color:#fef3c7; font-weight:bold; }
  .category-btn { background:#38bdf8; border:none; padding:8px 12px; border-radius:8px; margin:5px; cursor:pointer; font-weight:bold; color:white; }
  .category-btn:hover{background:#0ea5e9;}
  .grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); gap:20px; margin-top:15px; }
  .card { background: rgba(255,255,255,0.05); border-radius:16px; padding:18px; text-align:center; transition:0.3s; backdrop-filter:blur(10px);}
  .card:hover { transform: translateY(-5px); box-shadow:0 0 15px #38bdf8; }
  button { margin-top:10px; padding:8px 12px; background:#38bdf8; border:none; border-radius:8px; cursor:pointer; color:white; font-weight:bold; transition:0.3s; }
  button:hover{background:#0ea5e9;}
</style>
</head>
<body>

<h1>ðŸ“± SMS Onay KataloÄŸu</h1>

<div id="announcement">ðŸ“¢ Duyuru yÃ¼kleniyor...</div>

<div id="categoryMenu"></div>
<div id="urunListesi" class="grid"></div>

<script>
  const tg = window.Telegram.WebApp;
  tg.expand();

  // Ã–rnek Ã¼rÃ¼nler ve duyuru
  let announcement = "ðŸ“¢ TÃ¼m Ã¼rÃ¼nlerde %10 indirim var!";
  let kategoriler = ["TikTok","Instagram","WhatsApp","Telegram","PES","DiÄŸer"];
  let urunler = [
    {id:1, ad:"TikTok SMS Onay", kategori:"TikTok", stok:20, fiyat:1.5},
    {id:2, ad:"Instagram SMS Onay", kategori:"Instagram", stok:10, fiyat:2.0},
    {id:3, ad:"WhatsApp SMS Onay", kategori:"WhatsApp", stok:15, fiyat:1.2}
  ];

  // Duyuru gÃ¶ster
  document.getElementById("announcement").innerText = announcement;

  // Kategori menÃ¼sÃ¼ oluÅŸtur
  const menuDiv = document.getElementById("categoryMenu");
  function kategoriListele(){
    menuDiv.innerHTML = kategoriler.map(k => `<button class="category-btn" onclick="kategoriGoster('${k}')">${k}</button>`).join('');
  }

  // ÃœrÃ¼nleri render et
  function render(liste=urunler){
    const container = document.getElementById("urunListesi");
    container.innerHTML = liste.map(u => `
      <div class="card">
        <div class="name">${u.ad}</div>
        <div>Kategori: ${u.kategori}</div>
        <div>Stok: ${u.stok}</div>
        <div>Fiyat: ${u.fiyat.toFixed(2)} â‚º</div>
        <button onclick="urunSat(${u.id})">SatÄ±n Al</button>
      </div>
    `).join('');
  }

  // Kategoriye gÃ¶re filtre
  function kategoriGoster(k){
    const filtreli = urunler.filter(u => u.kategori===k);
    render(filtreli);
  }

  // SatÄ±n alma
  function urunSat(id){
    const urun = urunler.find(u=>u.id===id);
    if(!urun) return;
    if(urun.stok<=0) return alert("Stokta yok!");
    urun.stok--;
    if(urun.stok===0) urunler = urunler.filter(u=>u.id!==id);
    render();
    // Telegram WebApp ile admin'e bildirim gÃ¶nder
    const data = {urun:urun.ad, fiyat:urun.fiyat, kategori:urun.kategori};
    tg.sendData(JSON.stringify(data));
    alert("SatÄ±n alma bilgisi Telegram'a iletildi!");
  }

  kategoriListele();
  render();

</script>
</body>
</html>
