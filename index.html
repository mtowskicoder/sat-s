<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0">
<title>MTOW Market</title>

<style>
:root{
  --bg:#050b18;
  --panel:#0b1224;
  --card:#0f1833;
  --accent:#7c4dff;
  --text:#eaf0ff;
  --muted:#9aa4c7;
  --wa:#25D366;
}

*{box-sizing:border-box}
html,body{
  margin:0;
  font-family:Inter,system-ui,Arial;
  background:var(--bg);
  color:var(--text);
}

/* HEADER */
header{
  position:sticky;
  top:0;
  z-index:100;
  height:60px;
  background:linear-gradient(90deg,#0b1224,#050b18);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 14px;
}
header h1{
  font-size:18px;
  color:var(--accent);
}
header button{
  background:var(--accent);
  color:#fff;
  border:0;
  padding:8px 14px;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
}

/* MAIN */
main{
  padding:16px;
  max-width:1200px;
  margin:auto;
}

/* ANNOUNCEMENT */
.announce{
  background:linear-gradient(180deg,#101a3a,#0b1224);
  border-radius:14px;
  padding:14px;
  display:flex;
  gap:14px;
  align-items:center;
}
.announce img{
  width:120px;
  height:120px;
  border-radius:12px;
  object-fit:cover;
}
.announceText{
  font-weight:600;
  color:var(--muted);
}

/* CATEGORIES */
#categories{
  margin-top:26px;
}
#categories h2{
  margin-bottom:12px;
}
.catGrid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
  gap:12px;
}
.catBtn{
  background:var(--card);
  border-radius:14px;
  padding:14px;
  text-align:center;
  cursor:pointer;
  font-weight:800;
  transition:.2s;
}
.catBtn:hover{
  transform:translateY(-4px);
  box-shadow:0 10px 30px rgba(124,77,255,.25);
}

/* PRODUCTS */
#products{
  display:none;
  margin-top:30px;
}
.prodGrid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:14px;
}
.card{
  background:var(--card);
  border-radius:14px;
  padding:12px;
}
.card img{
  width:100%;
  height:140px;
  object-fit:contain;
}
.card h3{
  margin:8px 0 4px;
}
.price{
  color:#2dd4bf;
  font-weight:900;
}
.card button{
  width:100%;
  margin-top:10px;
  background:var(--accent);
  color:#fff;
  border:0;
  padding:10px;
  border-radius:10px;
  font-weight:800;
}

/* POPUP */
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:200;
}
.popupBox{
  background:var(--panel);
  padding:20px;
  border-radius:16px;
  width:90%;
  max-width:360px;
}
.popupBox h3{
  margin-top:0;
}
.popupBox button{
  width:100%;
  padding:12px;
  margin-top:12px;
  border-radius:12px;
  border:0;
  font-weight:800;
}
.waBtn{
  background:var(--wa);
  color:#002b12;
}

/* MOBILE */
@media(max-width:600px){
  .announce{
    flex-direction:column;
    text-align:center;
  }
}
</style>
</head>

<body>

<header>
  <h1>MTOW</h1>
  <button onclick="scrollToCategories()">Kategoriler</button>
</header>

<main>

<!-- ANNOUNCEMENT -->
<section class="announce">
  <img id="annGif" src="">
  <div class="announceText" id="annText">Y√ºkleniyor...</div>
</section>

<!-- CATEGORIES -->
<section id="categories">
  <h2>üõçÔ∏è Kategoriler</h2>
  <div class="catGrid" id="catGrid"></div>
</section>

<!-- PRODUCTS -->
<section id="products">
  <h2 id="prodTitle"></h2>
  <div class="prodGrid" id="prodGrid"></div>
</section>

</main>

<!-- POPUP -->
<div class="popup" id="popup">
  <div class="popupBox">
    <h3 id="popName"></h3>
    <p id="popInfo"></p>
    <button class="waBtn" id="waBtn">WhatsApp ile Satƒ±n Al</button>
    <button onclick="closePopup()">Kapat</button>
  </div>
</div>

<script>
const PRODUCTS_JSON = "data/products.json";
const ANN_JSON = "data/announcements.json";
const WA_LINK = "https://wa.me/6282261958495";

let products = {};
let currentProduct = null;

/* LOAD ANNOUNCEMENTS */
fetch(ANN_JSON).then(r=>r.json()).then(d=>{
  document.getElementById("annGif").src = d[0].gif;
  document.getElementById("annText").innerText = d[0].content;
});

/* LOAD PRODUCTS */
fetch(PRODUCTS_JSON).then(r=>r.json()).then(data=>{
  products = data;
  renderCategories();
});

function renderCategories(){
  const grid = document.getElementById("catGrid");
  grid.innerHTML="";
  Object.keys(products).forEach(cat=>{
    const b = document.createElement("div");
    b.className="catBtn";
    b.innerText = cat.toUpperCase();
    b.onclick=()=>openCategory(cat);
    grid.appendChild(b);
  });
}

function openCategory(cat){
  document.getElementById("products").style.display="block";
  document.getElementById("prodTitle").innerText = cat.toUpperCase();
  const g = document.getElementById("prodGrid");
  g.innerHTML="";
  products[cat].forEach(p=>{
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`
      <img src="${p.gif}">
      <h3>${p.name}</h3>
      <div class="price">${p.price}</div>
      <button>Satƒ±n Al</button>
    `;
    c.querySelector("button").onclick=()=>buyPopup(p,cat);
    g.appendChild(c);
  });
}

function buyPopup(p,cat){
  currentProduct = p;
  document.getElementById("popName").innerText=p.name;
  document.getElementById("popInfo").innerText=
    `Kategori: ${cat}\nFiyat: ${p.price}`;
  document.getElementById("popup").style.display="flex";
  document.getElementById("waBtn").onclick=()=>{
    const msg=`Merhaba, ${p.name} satƒ±n almak istiyorum. (${p.price})`;
    window.open(WA_LINK+"?text="+encodeURIComponent(msg));
  };
}

function closePopup(){
  document.getElementById("popup").style.display="none";
}

function scrollToCategories(){
  document.getElementById("categories").scrollIntoView({behavior:"smooth"});
}
</script>

</body>
</html>
